# redis内存数据库（高性能，高并发）

## redis功能

redis是内存数据库，读写速度非常快，因此被广泛应用于缓存方向。还可以拿来做分布式锁，甚至是消息队列。Redis还支持事务，持久化，lua脚本，多种集群方案。

### 缓存数据的处理流程是怎么样的？

收到用户请求会先检查缓存中是否存在对应的数据，有则返回，没有就区数据库中查找是否存在对应的数据，有则更新缓存数据，没有的话就返回空数据。



```text
缓存穿透：大量请求的key不存在缓存中，直接请求到了数据库，
解决办法：检查用户参数或者使用 布隆过滤器（任何查询先进入过滤器筛查）

缓存雪崩：缓存在同一时间大面积的失效，后面的请求都直接落到了数据库上。
比如在秒杀开始12小时前，统一存放了一批商品到redis中设置了缓存时间也是12小时，
秒杀开始，这些请求直接落到了数据库上。
解决办法：针对redis服务不可用：1。采用redis集群，避免单机出问题整个缓存服务都没办法使用
2。限流：避免同时处理大量的请求。
针对热点缓存失效的情况：1：设置不同的失效时间，比如随即设置缓存的失效时间 2。缓存永不失效

缓存常用的3种读写策略
1。旁路缓存模式 cache aside pattern（适合读请求比较多的场景）
    写： 先更新DB，然后直接删除cache
    读： 从cache中读取数据，读取到就直接返回，读不到去DB里面读取，再把数据放到cache中
    
2。读写穿透模式 read/write through pattern
    服务端把cache视为主要数据存储，一直在维护cache
    写： 先查cache，不存在则更新DB，cache存在，同步更新cache和db
    读： 从cache中读取，有就拿出来，没有就在db拿，再写入到cache

3。 异步缓存写入 write behind pattern
    都是由cache服务来负责cache和DB到读写 和2相似
    不同的是，2是同步更新，而3是更新缓存，不直接更新DB，之后批量更新DB
```





