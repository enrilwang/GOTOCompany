# 网络复习总结三

## TCP建立三次握手

A：客户，先打开进程向B发出连接请求报文段，B收到后，会发送确认，ack = x + 1表示前seq = x 的数据都收到了，然后呢，A收到了B的回复，但是为了双向通信，所以，A得回复一下B，否则就是单向通信了，所以必须要有第三次握手，A就发送seq = x+1，发送的数据，ack = y + 1，表示收到了前y个

## TCP的连接释放：四报文握手

A----客户端    B-----服务器

A发出FIN = 1代表发起释放连接请求，B收到后，发确认，此时TCP连接处于半关闭状态，A到B这个方向的连接释放了。然后B也发起连接释放请求，此时A会发送一个收到确认，然后B收到后就关闭，A会有2msl的时间（等待计时器）这个等待计时器作用是不想在这个等待时间里再次收到B给的断开连接请求。因为这个等待时间比超时计数器的时间更长所以能够保证B收到了A的确认。



## 总结

TCP可靠传输

建立连接：三握手

发送数据：窗口（序号，发送窗口+接收窗口），确认机制，流量控制，拥塞控制，（发现什么时候拥塞，让拥塞来得越晚越好），超时重传。。。。

连接释放：四握手



## 应用层

每个应用层协议都是为了解决某一类应用问题

域名系统DNS（分布式数据库），计算机用户间接而不是直接使用域名系统，互联网采用层次结构的命名树作为主的名字并使用分布式的域名系统DNS，名字到IP地址的解析是由若干个域名服务器程序完成的。

域名的结构由标号序列组成，.....三级域名.二级域名.顶级域名

顶级域名TLD（Top Level Domain）有：1）国家顶级域名 2）通用顶级域名。com是公司和企业



## 用户点击URL 连接后所发生的事件

1. 浏览器分析超链接指向页面的URL
2. 浏览器向DNS请求解析 URL的IP地址
3. 域名系统DNS解析出连接服务器的ip地址
4. 浏览器与服务器建立TCP连接
5. 浏览器发出取文件命令：GET啥啥
6. 服务器给出响应，把文件html发给浏览器
7. TCP连接释放
8. 浏览器显示所有文本



## 状态码

* 1xx表示通知信息的
* 2xx表示成功
* 3xx表示重定向
* 4xx表示客户的差错
* 5xx表示服务器的差错

## Cookie（存储在浏览器上，数据类型固定）

cookie表示在http服务器和客户之间传递的状态信息，使用Cookie的网站服务器为用户产生一个**唯一的识别码**，利用此识别码就能够跟踪用户在该网站的活动

### Session（存储在服务器上，可以是任何数据）

## HTTPS加密技术

HTTPS是http先和SSL（secure socket layer）通信，然后再和TCP通信，也就是说HTTPS使用了隧道进行通信。通过使用SSL，HTTPS具有了加密（防窃听），认证（防伪装）和完整性保护（防篡改）

```text
加密
1。对称密钥加密：加密和解密使用同一个密钥
    优点：运算速度快
    缺点：无法安全的将密钥传输给通信方
2。非对称密钥加密：又称公开密钥加密，加密和解密使用不同密钥
    公开密钥所有人都可以获得，通信发送方获得接收方的公开密钥之后，
    就可以使用公开密钥进行加密，接收方收到通信内容后使用私有密钥
    解密。
    非对称密钥除了用来加密，还可以用来进行签名。因为私有密钥无法被
    其他人获取，因此通信发送方使用其私有密钥进行签名，通信接收方使用
    发送方的公开密钥对签名进行解密，就能判断这个签名是否正确
        优点：更安全的将公开密钥传输给通信发送方
        缺点：运算速度慢

HTTPS采用的加密方式
使用非对称密钥加密方式，传输对称密钥加密方式所需要的Secret Key，从而
保证安全性
获取到Secret Key后，再使用对称密钥加密方式进行通信，从而保证效率
```

